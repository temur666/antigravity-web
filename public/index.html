<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Antigravity Chat</title>
  <meta name="description" content="Antigravity IDE Remote Chat Interface">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- 侧边栏 -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <span class="logo-icon">✦</span>
          <span class="logo-text">Antigravity</span>
        </div>
        <button id="btn-new-chat" class="sidebar-btn" title="新建对话">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </button>
      </div>
      <div id="sidebar-chats" class="sidebar-chats">
        <div class="sidebar-section-title">对话列表</div>
        <div id="chat-list" class="chat-list">
          <div class="chat-list-empty">点击刷新加载对话</div>
        </div>
      </div>
      <div class="sidebar-footer">
        <button id="btn-refresh-chats" class="sidebar-footer-btn" title="刷新对话列表">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
          <span>刷新列表</span>
        </button>
        <div id="cdp-status" class="cdp-status disconnected">
          <span class="cdp-dot"></span>
          <span class="cdp-text">CDP 未连接</span>
          <button id="btn-reconnect" class="cdp-reconnect-btn" title="重连">重连</button>
        </div>
      </div>
    </aside>

    <!-- 主聊天区域 -->
    <main id="main-area">
      <!-- 顶栏 -->
      <header id="chat-header">
        <button id="btn-toggle-sidebar" class="header-btn mobile-only" title="菜单">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
        <div class="header-title">
          <span class="header-title-text">Antigravity Chat</span>
          <span id="header-subtitle" class="header-subtitle">远程 AI 对话</span>
        </div>
        <div class="header-actions">
          <button id="btn-screenshot" class="header-btn" title="截屏">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
          </button>
        </div>
      </header>

      <!-- 消息区域 -->
      <div id="messages-container">
        <div id="messages" class="messages">
          <div class="welcome-message">
            <div class="welcome-icon">✦</div>
            <h2>Antigravity Chat</h2>
            <p>发送消息即可与 AI 对话，支持完整的流式输出</p>
            <div class="welcome-features">
              <div class="feature-item">⚡ 实时流式回复</div>
              <div class="feature-item">💻 完整代码高亮</div>
              <div class="feature-item">📸 界面截屏</div>
              <div class="feature-item">📝 无限消息长度</div>
            </div>
          </div>
        </div>
      </div>

      <!-- 输入区域 -->
      <div id="input-area">
        <div class="input-wrapper">
          <div id="chat-input" class="chat-input" contenteditable="true" data-placeholder="发送消息..." role="textbox"></div>
          <button id="btn-send" class="send-btn" title="发送">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
          </button>
        </div>
        <div class="input-hint">Enter 发送 · Shift+Enter 换行</div>
      </div>
    </main>
  </div>

  <!-- 截屏弹窗 -->
  <div id="screenshot-modal" class="modal-overlay" style="display:none">
    <div class="modal-content screenshot-modal-content">
      <div class="modal-header">
        <span>📸 截屏</span>
        <button id="btn-close-screenshot" class="modal-close">&times;</button>
      </div>
      <img id="screenshot-img" class="screenshot-img" alt="截屏">
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
